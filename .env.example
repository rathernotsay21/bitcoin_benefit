# Bitcoin Benefit Platform - Environment Configuration
# Copy this file to .env.local and configure your values

# ==============================================================================
# APPLICATION SETTINGS
# ==============================================================================

# Site Configuration
NEXT_PUBLIC_SITE_URL=https://your-domain.com
NEXT_PUBLIC_APP_NAME="Bitcoin Benefit"
NEXT_PUBLIC_APP_VERSION=1.0.0

# Environment
NODE_ENV=production
NEXT_PUBLIC_ENVIRONMENT=production

# Development Settings (only set in development)
NEXT_PUBLIC_USE_FALLBACK_PRICES=false
NEXT_PUBLIC_SKIP_API_CALLS=false

# ==============================================================================
# API SECURITY & AUTHENTICATION
# ==============================================================================

# API Keys (comma-separated for multiple keys)
VALID_API_KEYS=your-api-key-1,your-api-key-2

# Request Signature Secret (generate with: openssl rand -hex 32)
REQUEST_SIGNATURE_SECRET=your-secret-key-for-request-signing

# JWT Secret (generate with: openssl rand -hex 64)
JWT_SECRET=your-jwt-secret-key
JWT_ISSUER=bitcoin-benefit-app
JWT_AUDIENCE=bitcoin-benefit-api

# ==============================================================================
# EXTERNAL API CONFIGURATION
# ==============================================================================

# CoinGecko API Configuration
COINGECKO_API_KEY=your-coingecko-api-key
COINGECKO_FALLBACK_API_KEY=your-coingecko-fallback-key
COINGECKO_RPM=50         # Requests per minute
COINGECKO_RPH=1000       # Requests per hour  
COINGECKO_RPD=100000     # Requests per day

# Mempool.space API Configuration (Pro tier)
MEMPOOL_API_KEY=your-mempool-api-key
MEMPOOL_FALLBACK_API_KEY=your-mempool-fallback-key
MEMPOOL_RPM=60           # Requests per minute
MEMPOOL_API_BASE_URL=https://mempool.space/api  # Base URL for Mempool API
NEXT_PUBLIC_MEMPOOL_PROXY_ENABLED=true          # Enable proxy through Next.js API routes
MEMPOOL_RPH=1000         # Requests per hour
MEMPOOL_RPD=10000        # Requests per day

# ==============================================================================
# RATE LIMITING CONFIGURATION
# ==============================================================================

# Global Rate Limits (requests per minute per IP)
GENERAL_RATE_LIMIT=100
COINGECKO_RATE_LIMIT=10
MEMPOOL_RATE_LIMIT=30
TIMESTAMP_RATE_LIMIT=5

# Progressive Rate Limiting
RATE_LIMIT_SKIP_SUCCESS_COUNT=100
RATE_LIMIT_SKIP_FAILURE_COUNT=5

# ==============================================================================
# REDIS CONFIGURATION (for production rate limiting)
# ==============================================================================

# Redis URL for persistent rate limiting (optional)
# If not provided, falls back to in-memory rate limiting
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0

# Redis Cluster Configuration (for high availability)
REDIS_CLUSTER_NODES=redis-node1:6379,redis-node2:6379,redis-node3:6379

# ==============================================================================
# DATABASE CONFIGURATION (if using database for rate limiting)
# ==============================================================================

# PostgreSQL for rate limiting and analytics (optional)
DATABASE_URL=postgresql://user:password@localhost:5432/bitcoin_benefit
DATABASE_SSL=false

# ==============================================================================
# CORS CONFIGURATION
# ==============================================================================

# Allowed Origins (comma-separated)
ALLOWED_ORIGINS=http://localhost:3000,https://localhost:3000,https://your-domain.com

# CORS Settings
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=86400

# ==============================================================================
# MONITORING & LOGGING
# ==============================================================================

# Logging Configuration
LOG_LEVEL=info           # debug, info, warn, error
ENABLE_REQUEST_LOGGING=true
ENABLE_PERFORMANCE_LOGGING=true

# Monitoring Services
SENTRY_DSN=your-sentry-dsn
DATADOG_API_KEY=your-datadog-api-key

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000  # 30 seconds

# ==============================================================================
# CACHING CONFIGURATION
# ==============================================================================

# Cache Settings
CACHE_TTL_BITCOIN_PRICE=300     # 5 minutes
CACHE_TTL_NETWORK_HEALTH=30     # 30 seconds
CACHE_TTL_HISTORICAL_DATA=3600  # 1 hour

# CDN Configuration
CDN_URL=https://your-cdn.com
ENABLE_CDN_CACHING=true

# ==============================================================================
# SECURITY CONFIGURATION  
# ==============================================================================

# Security Headers
ENABLE_SECURITY_HEADERS=true
ENABLE_CSRF_PROTECTION=false    # Set to true if using forms
ENABLE_SIGNATURE_VALIDATION=false  # Set to true for API signature validation

# Content Security Policy
CSP_SCRIPT_SRC=self,unsafe-inline
CSP_STYLE_SRC=self,unsafe-inline
CSP_IMG_SRC=self,data:,https:

# ==============================================================================
# PERFORMANCE CONFIGURATION
# ==============================================================================

# Request Timeouts (milliseconds)
API_TIMEOUT=30000
EXTERNAL_API_TIMEOUT=15000

# Retry Configuration
MAX_RETRIES=3
RETRY_DELAY=1000
RETRY_MULTIPLIER=2

# Request Size Limits (bytes)
MAX_REQUEST_SIZE=1048576     # 1MB
MAX_URL_LENGTH=2048
MAX_HEADER_SIZE=16384

# ==============================================================================
# FEATURE FLAGS
# ==============================================================================

# Feature toggles
ENABLE_ANALYTICS=true
ENABLE_ERROR_REPORTING=true
ENABLE_PERFORMANCE_MONITORING=true
ENABLE_ADVANCED_CACHING=true

# Beta Features
ENABLE_BETA_FEATURES=false
ENABLE_EXPERIMENTAL_APIS=false

# ==============================================================================
# BLOCKCHAIN CONFIGURATION
# ==============================================================================

# Bitcoin Network Settings
BITCOIN_NETWORK=mainnet      # mainnet, testnet, regtest
BITCOIN_RPC_URL=https://your-bitcoin-node.com
BITCOIN_RPC_USER=your-rpc-user
BITCOIN_RPC_PASSWORD=your-rpc-password

# Block Explorer APIs
BLOCKSTREAM_API_URL=https://blockstream.info/api
BLOCKCYPHER_API_KEY=your-blockcypher-api-key

# ==============================================================================
# DEVELOPMENT & TESTING
# ==============================================================================

# Development Settings
ENABLE_DEBUG_MODE=false
ENABLE_MOCK_APIS=false
MOCK_BITCOIN_PRICE=50000

# Testing Configuration
TEST_API_KEY=test-api-key
TEST_RATE_LIMIT=1000
ENABLE_TEST_ENDPOINTS=false

# ==============================================================================
# BACKUP & RECOVERY
# ==============================================================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_INTERVAL=86400000     # 24 hours
BACKUP_RETENTION_DAYS=30

# Recovery Settings
ENABLE_GRACEFUL_DEGRADATION=true
FALLBACK_PRICE_SOURCE=static

# ==============================================================================
# COMPLIANCE & REGULATORY
# ==============================================================================

# Regulatory Compliance
ENABLE_AUDIT_LOGGING=true
DATA_RETENTION_DAYS=2555     # 7 years
GDPR_COMPLIANCE_MODE=false

# Geographic Restrictions
BLOCKED_COUNTRIES=
RESTRICTED_FEATURES=

# ==============================================================================
# DEPLOYMENT CONFIGURATION  
# ==============================================================================

# Deployment Settings
DEPLOYMENT_ENVIRONMENT=production
BUILD_ID=
COMMIT_SHA=

# Health Check URLs
HEALTH_CHECK_URL=/api/health
READINESS_CHECK_URL=/api/ready

# Graceful Shutdown
SHUTDOWN_TIMEOUT=30000       # 30 seconds